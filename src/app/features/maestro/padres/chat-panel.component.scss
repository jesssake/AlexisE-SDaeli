:host {
  display: block;
  font-size: 13px;
}

/* ====== VENTANA ====== */
.chat-wrap{
  display:grid; grid-template-rows:auto 1fr auto; height:100%;
  background: rgba(255,255,255,.92);
  backdrop-filter: saturate(120%) blur(10px);
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 16px;
  box-shadow: 0 14px 44px rgba(22, 18, 56, .16);
  overflow: hidden;
}
.chat-wrap.floating{ position: fixed; z-index: 1000; user-select: none; }

/* ====== HEADER ====== */
.chat-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding: 10px 12px;
  background: linear-gradient(180deg, #f0ecff 0%, #ffffff 85%);
  border-bottom: 1px solid rgba(0,0,0,.06);
  cursor: move; /* toda la barra es “drag” */
}
.chat-head .title{
  display:flex; align-items:baseline; flex-wrap:wrap; gap:8px 10px;
}
.chat-head .title strong{
  font-size: 15px; font-weight: 800; color:#242338; letter-spacing:.2px;
}
.chat-head .title small{
  font-size: 11px; color:#6d7280; margin-top:2px;
}

/* Botones de ventana */
.window-actions{ display:flex; gap:8px; }
.icon{
  width: 28px; height: 28px;
  display:inline-grid; place-items:center;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.08);
  background: #fff;
  font-weight: 800;
  line-height: 1;
  cursor: pointer;
  transition: transform .06s ease, box-shadow .2s ease, background-color .2s ease;
}
.icon:hover{ box-shadow: 0 6px 18px rgba(0,0,0,.10); }
.icon:active{ transform: translateY(1px); }
.icon.danger{ color:#b42318; }

/* ====== BODY ====== */
.chat-body{
  position:relative; overflow: auto; padding: 12px 12px 8px;
  background:
    radial-gradient(900px 420px at 130% -10%, #f3f6ff 0%, transparent 60%),
    radial-gradient(700px 380px at -20% -10%, #fff5fb 0%, transparent 60%),
    #f7f8fb;
}

/* Evitar 'título duplicado' si algún HTML antiguo metió un <h1>/<h2> al body */
.chat-body > h1, .chat-body > h2 { display: none; }

.state{ margin: 10px 4px; font-size: 12.5px; color:#6b7280; }
.state.error{ color:#b42318; }

/* ====== MENSAJES ====== */
.msg{ display:flex; margin:10px 0; }
.msg.mine{ justify-content: flex-end; }

.bubble{
  position: relative;
  max-width: 72%;
  padding: 9px 12px;
  border-radius: 14px;
  background: linear-gradient(180deg, #ffffff 0%, #fafbff 100%);
  box-shadow: 0 8px 22px rgba(0,0,0,.06);
}
.msg.mine .bubble{
  background: linear-gradient(180deg, #eaf1ff 0%, #e6eeff 100%);
}

.meta{
  display:flex; align-items:center; gap:8px;
  font-size: 10.5px; color:#6b7280; margin-bottom: 6px;
}
.meta .who{ font-weight: 800; letter-spacing:.2px; color:#3b3f53; }
.meta .when{ opacity:.85; }

/* acciones por mensaje (aparecen al hover) */
.msg-actions{
  margin-left:auto; display:flex; gap:6px; opacity:0; pointer-events:none;
  transition: opacity .15s ease;
}
.bubble:hover .msg-actions{ opacity:1; pointer-events:auto; }
.mini{
  height: 22px; padding: 0 8px;
  border-radius: 8px; border:1px solid rgba(0,0,0,.08);
  background:#fff; font-size:12px; font-weight:700; cursor:pointer;
}
.mini.danger{ color:#b42318; }
.mini.ghost{ background:transparent; }

/* texto */
.text{ font-size: 13.5px; line-height: 1.35; color:#222; white-space: pre-wrap; }

/* edición inline */
.edit-box textarea{
  width:100%; resize: vertical; min-height:48px;
  border:1px solid rgba(0,0,0,.12); border-radius: 10px; padding:8px 10px; outline:none;
  background:#fff;
}
.edit-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:6px; }

/* ====== FOOTER ====== */
.chat-foot{
  display:grid; grid-template-columns: 1fr auto; gap:10px;
  padding: 10px; border-top:1px solid rgba(0,0,0,.06); background:#fff;
}
.chat-foot textarea{
  resize: vertical; min-height: 40px; max-height: 140px;
  width:100%; font-size:13.5px;
  padding:10px 12px;
  border:1px solid rgba(0,0,0,.12); border-radius: 12px; outline:none;
  background:#fff;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
}
.send{
  height: 40px; min-width: 104px;
  border:none; border-radius: 12px; font-weight: 800; cursor:pointer;
  color:#fff; background: linear-gradient(180deg, #6677ff 0%, #5566ff 100%);
  box-shadow: 0 10px 20px rgba(85,102,255,.25);
  transition: transform .06s ease, opacity .2s ease, box-shadow .2s ease;
}
.send:hover{ box-shadow: 0 12px 26px rgba(85,102,255,.30); }
.send:active{ transform: translateY(1px); }
.send:disabled{ opacity:.55; cursor:not-allowed; box-shadow:none; }

/* ====== SCROLLBAR ====== */
.chat-body::-webkit-scrollbar{ width: 8px; }
.chat-body::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.12); border-radius: 8px; }
