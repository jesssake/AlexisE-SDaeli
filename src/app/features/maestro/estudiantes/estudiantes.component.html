<div class="estudiantes-container">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <h1 class="page-title">GestiÃ³n de Estudiantes</h1>
      <button class="btn-primary" (click)="abrirModalNuevo()">â• Agregar Estudiante</button>
    </div>
    <p class="page-subtitle">Administra la informaciÃ³n de los estudiantes y tutores</p>
  </div>

  <!-- Estado -->
  <div *ngIf="cargando" class="info-banner loading">Cargando estudiantes...</div>
  <div *ngIf="!cargando && errorCarga" class="info-banner error">
    {{ errorCarga }} <button class="link" (click)="recargar()">Reintentar</button>
  </div>

  <!-- Tabla -->
  <div *ngIf="!cargando && estudiantes.length > 0" class="tabla">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre del NiÃ±o/a</th>
          <th>Fecha Nacimiento</th>
          <th>Edad</th>
          <th>Correo Tutor</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let e of estudiantes">
          <td>{{ e.id }}</td>
          <td>{{ e.nombre }}</td>
          <td>{{ e.fecha_nacimiento || 'â€”' }}</td>
          <td>{{ e.edad || 'â€”' }}</td>
          <td>{{ e.correo_tutor || 'â€”' }}</td>
          <td class="acciones">
            <button class="btn-small edit" (click)="abrirModalEditar(e)" title="Editar">âœï¸</button>
            <button class="btn-small delete" (click)="confirmarEliminar(e)" title="Eliminar">ğŸ—‘ï¸</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!cargando && estudiantes.length === 0" class="info-banner empty">
    No hay estudiantes registrados.
  </div>

  <!-- Modal agregar/editar -->
  <div class="modal-backdrop" *ngIf="modalAbierto">
    <div class="modal">
      <h2>{{ editando ? 'Editar Estudiante' : 'Agregar Estudiante' }}</h2>

      <form (ngSubmit)="guardar()">
        <label>Nombre del NiÃ±o/a</label>
        <input [(ngModel)]="form.nombre" name="nombre" required />

        <label>Fecha de Nacimiento</label>
        <input [(ngModel)]="form.fecha_nacimiento" name="fecha_nacimiento" type="date" required />

        <label>Correo del Tutor</label>
        <input [(ngModel)]="form.correo_tutor" name="correo_tutor" type="email" />

        <div class="modal-actions">
          <button type="submit" class="btn-primary">
            {{ editando ? 'Guardar Cambios' : 'Agregar' }}
          </button>
          <button type="button" class="btn-secondary" (click)="cerrarModal()">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- FAB: botÃ³n flotante (siempre visible) -->
<button class="fab-add" (click)="abrirModalNuevo()" aria-label="Agregar estudiante">â•</button>
