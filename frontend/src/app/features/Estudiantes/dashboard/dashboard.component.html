<div class="dashboard estudiante-theme">
  <!-- ========== TOPBAR ========== -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">ğŸ‘©â€ğŸ“</div>
      <div class="titles">
        <h1>Avisos Activos</h1>
        <p>Solo los avisos que tu maestra ha activado</p>
      </div>
    </div>

    <div class="now">
      <div class="time">{{ fechaActual.hora }}</div>
      <div class="date">
        {{ fechaActual.dia }} Â· {{ fechaActual.mes }} {{ fechaActual.anio }}
      </div>
    </div>
  </header>

  <!-- ========== ESTADÃSTICAS ========== -->
  <section class="estadisticas-grid">
    <div class="estadistica-card total">
      <div class="est-icon">ğŸ“‹</div>
      <div class="est-content">
        <div class="est-value">{{ estadisticas.total }}</div>
        <div class="est-label">Avisos Activos</div>
      </div>
    </div>

    <div class="estadistica-card alta">
      <div class="est-icon">ğŸ”´</div>
      <div class="est-content">
        <div class="est-value">{{ estadisticas.altos }}</div>
        <div class="est-label">Importantes</div>
      </div>
    </div>

    <div class="estadistica-card media">
      <div class="est-icon">ğŸŸ¡</div>
      <div class="est-content">
        <div class="est-value">{{ estadisticas.medios }}</div>
        <div class="est-label">Normales</div>
      </div>
    </div>

    <div class="estadistica-card baja">
      <div class="est-icon">ğŸŸ¢</div>
      <div class="est-content">
        <div class="est-value">{{ estadisticas.bajos }}</div>
        <div class="est-label">Informativos</div>
      </div>
    </div>
  </section>

  <!-- ========== AVISOS ACTIVOS ========== -->
  <section class="panel">
    <div class="panel-head">
      <h2>ğŸ“¢ Avisos Publicados</h2>
      
      <div class="panel-actions">
        <button class="btn ghost" (click)="actualizarDashboard()" [disabled]="loading">
          â†» Actualizar
        </button>
        <div class="ultimo-aviso" *ngIf="estadisticas.ultimo_aviso !== 'Sin avisos activos'">
          Ãšltimo: {{ estadisticas.ultimo_aviso }}
        </div>
      </div>
    </div>

    <!-- Estado de carga/error -->
    <div class="status" *ngIf="loading || error">
      <div class="status-content">
        <span *ngIf="loading">Cargando avisos activosâ€¦</span>
        <span *ngIf="error" class="bad">âš  {{ error }}</span>
      </div>
    </div>

    <!-- Grid de avisos -->
    <div class="avisos-grid">
      <!-- Tarjeta de aviso ACTIVO -->
      <article 
        class="aviso-card" 
        *ngFor="let aviso of avisos"
        [class]="getPrioridadClass(aviso.prioridad)"
        (click)="verDetalleAviso(aviso)"
      >
        <div class="aviso-header">
          <span class="prioridad-badge">
            {{ getPrioridadIcon(aviso.prioridad) }} 
            {{ getPrioridadTexto(aviso.prioridad) }}
          </span>
          <span class="aviso-fecha">{{ aviso.fecha_formateada }}</span>
        </div>
        
        <div class="aviso-content">
          <h3>{{ aviso.titulo }}</h3>
          <p class="aviso-resumen">{{ aviso.contenido | slice:0:120 }}{{ aviso.contenido.length > 120 ? 'â€¦' : '' }}</p>
        </div>
        
        <div class="aviso-footer">
          <button class="btn-ver-mas">Ver detalles â†’</button>
        </div>
      </article>

      <!-- Sin avisos -->
      <div class="empty-state" *ngIf="!loading && avisos.length === 0">
        <div class="empty-icon">ğŸ“­</div>
        <h3>No hay avisos activos disponibles</h3>
        <p>Tus maestros aÃºn no han activado ningÃºn aviso para que sea visible.</p>
        <button class="btn primary" (click)="actualizarDashboard()">
          â†» Intentar de nuevo
        </button>
      </div>
    </div>
  </section>

  <!-- ========== MODAL DETALLE ========== -->
  <div class="overlay" *ngIf="mostrarModalDetalle" (click)="cerrarModalDetalle()">
    <div class="modal detalle" (click)="$event.stopPropagation()">
      <header class="modal-head">
        <h3>ğŸ“„ Detalle del Aviso</h3>
        <button class="x" (click)="cerrarModalDetalle()">Ã—</button>
      </header>

      <div class="modal-body" *ngIf="avisoSeleccionado">
        <div class="detalle-header">
          <span class="prioridad-detalle" [class]="getPrioridadClass(avisoSeleccionado.prioridad)">
            {{ getPrioridadIcon(avisoSeleccionado.prioridad) }} 
            {{ getPrioridadTexto(avisoSeleccionado.prioridad) }}
          </span>
          <span class="fecha-detalle">
            ğŸ“… {{ avisoSeleccionado.fecha_formateada }}
          </span>
        </div>

        <div class="detalle-content">
          <h2>{{ avisoSeleccionado.titulo }}</h2>
          <div class="contenido-completo">
            {{ avisoSeleccionado.contenido }}
          </div>
        </div>
      </div>

      <footer class="modal-actions">
        <button class="btn primary" (click)="cerrarModalDetalle()">
          Cerrar
        </button>
      </footer>
    </div>
  </div>
</div>