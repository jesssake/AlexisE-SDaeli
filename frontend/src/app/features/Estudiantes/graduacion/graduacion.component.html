<div class="grad-wrapper" [class.loading]="cargando()">
  <section class="panel head">
    <div class="title-block">
      <h1>Mis certificados</h1>
      <p class="sub">
        AquÃ­ podrÃ¡s ver los certificados emitidos por tu escuela.
      </p>
    </div>

    <button type="button" class="btn-refresh" (click)="cargarCertificados()">
      ðŸ”„ Actualizar
    </button>
  </section>

  <section class="panel content">
    <div *ngIf="errorMsg()" class="alert error">
      {{ errorMsg() }}
    </div>

    <div *ngIf="!errorMsg() && !tieneCertificados() && !cargando()" class="empty-state">
      <h2>AÃºn no tienes certificados</h2>
      <p>Cuando tu maestro genere y envÃ­e uno, aparecerÃ¡ aquÃ­.</p>
    </div>

    <div *ngIf="tieneCertificados()" class="lista-certificados">
      <article class="cert-card" *ngFor="let c of certificados()">
        <header class="cert-header">
          <div class="pill tipo">
            {{ c.tipo | titlecase }}
          </div>
          <span class="fecha">
            Emitido el: {{ c.fecha_emision | date : 'dd/MM/yyyy HH:mm' }}
          </span>
        </header>

        <h2 class="titulo">
          Certificado de fin de curso â€“ {{ c.ciclo }}
        </h2>

        <p class="alumno">
          Alumno: <strong>{{ c.alumno }}</strong>
        </p>

        <p class="promedio" *ngIf="c.promedio !== null">
          Promedio general:
          <strong>{{ c.promedio | number : '1.2-2' }}</strong>
        </p>

        <p class="estado">
          Estado:
          <span class="pill estado-pill">{{ c.estado | titlecase }}</span>
        </p>

        <footer class="cert-footer">
          <small>
            Si la escuela adjunta el archivo del certificado, podrÃ¡s descargarlo desde aquÃ­.
          </small>

          <button
            *ngIf="c.archivo_path"
            type="button"
            class="btn-descargar"
            (click)="abrirCertificado(c.archivo_path)"
          >
            ðŸ“„ Ver certificado
          </button>
        </footer>
      </article>
    </div>
  </section>
</div>
